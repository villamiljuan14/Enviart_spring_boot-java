<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio</title>

    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen flex items-center justify-center">

<div class="bg-white shadow-lg rounded-2xl p-8 w-full max-w-lg text-center">
    <h2 class="text-2xl font-bold text-gray-700 mb-4">Bienvenido al sistema</h2>

    <p class="text-gray-600 mb-6">
        Tu rol es: <span th:text="${rol}" class="font-semibold text-blue-600">USER</span>
    </p>

    <!-- Opciones según rol -->
    <nav class="space-y-4">
        <!-- Opción ADMIN -->
        <div th:if="${#authorization.expression('hasRole(''ADMIN'')')}">
            <a th:href="@{/usuarios}" 
               class="block bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition">
               Ver usuarios
            </a>
        </div>

        <!-- Opción USER -->
        <div th:if="${#authorization.expression('hasRole(''USER'')')}">
            <a th:href="@{/perfil}" 
               class="block bg-green-600 text-white px-5 py-2 rounded-lg hover:bg-green-700 transition">
               Editar mi perfil
            </a>
        </div>
    </nav>

    <!-- Mensaje de éxito -->
    <div id="mensajeExito" 
         th:if="${param.actualizado}" 
         class="mt-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative animate-fadeIn">
        ¡Tu perfil ha sido actualizado correctamente!
    </div>

    <!-- Botón de logout -->
    <form th:action="@{/logout}" method="post" class="mt-8">
        <button type="submit"
                class="bg-gray-500 text-white px-5 py-2 rounded-lg hover:bg-gray-600 transition">
            Cerrar sesión
        </button>
    </form>
</div>

<!-- Animación y desaparición del mensaje -->
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const mensaje = document.getElementById("mensajeExito");
        if (mensaje) {
            setTimeout(() => {
                mensaje.style.transition = "opacity 0.5s ease";
                mensaje.style.opacity = "0";
                setTimeout(() => mensaje.remove(), 500);
            }, 4000);
        }
    });
</script>

<!-- Animación Tailwind -->
<style>
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-5px); }
  to { opacity: 1; transform: translateY(0); }
}
.animate-fadeIn {
  animation: fadeIn 0.5s ease-out;
}
</style>

</body>
</html>

